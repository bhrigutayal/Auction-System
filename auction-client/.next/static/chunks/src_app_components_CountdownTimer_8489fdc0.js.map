{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bhrigu/Desktop/Auction-System/auction-client/src/app/components/CountdownTimer.js"],"sourcesContent":["'use client';\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nexport default function CountdownTimer({ endTime, onEnd, isCard = false }) {\r\n  const [timeLeft, setTimeLeft] = useState({});\r\n  const hasEndedRef = useRef(false);\r\n\r\n  const calculateTimeLeft = () => {\r\n    const difference = +new Date(endTime) - +new Date();\r\n    let timeLeft = {};\r\n\r\n    if (difference > 0) {\r\n      timeLeft = {\r\n        days: Math.floor(difference / (1000 * 60 * 60 * 24)),\r\n        hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\r\n        minutes: Math.floor((difference / 1000 / 60) % 60),\r\n        seconds: Math.floor((difference / 1000) % 60),\r\n      };\r\n    }\r\n    return timeLeft;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTimeLeft(calculateTimeLeft());\r\n  }, [endTime]);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      const newTimeLeft = calculateTimeLeft();\r\n      setTimeLeft(newTimeLeft);\r\n      \r\n      // Only call onEnd once when auction ends\r\n      if (Object.keys(newTimeLeft).length === 0 && !hasEndedRef.current && onEnd) {\r\n        hasEndedRef.current = true;\r\n        onEnd();\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [timeLeft, onEnd, endTime]);\r\n\r\n  const timerComponents = [];\r\n\r\n  Object.keys(timeLeft).forEach((interval) => {\r\n    if (!timeLeft[interval] && interval !== 'seconds' && interval !== 'minutes') {\r\n      return;\r\n    }\r\n    timerComponents.push(\r\n      <span key={interval}>\r\n        {String(timeLeft[interval]).padStart(2, '0')}{interval.charAt(0)}\r\n      </span>\r\n    );\r\n  });\r\n  \r\n  const timeString = `${String(timeLeft.hours || 0).padStart(2, '0')}:${String(timeLeft.minutes || 0).padStart(2, '0')}:${String(timeLeft.seconds || 0).padStart(2, '0')}`;\r\n\r\n  if (isCard) {\r\n    const isUrgent = timeLeft.hours === 0 && timeLeft.minutes < 30;\r\n    return (\r\n      <div className={`font-bold ${isUrgent ? 'text-red-600' : 'text-gray-800'}`}>\r\n        {timeLeft.days > 0 ? `${timeLeft.days}d ` : ''}{timeString}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"text-2xl font-bold text-red-600 tabular-nums\">\r\n      {timerComponents.length ? timeString : <span>Time's up!</span>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;;AADA;;AAGe,SAAS,eAAe,KAAkC;QAAlC,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,KAAK,EAAE,GAAlC;;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,CAAC;IAC1C,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAE3B,MAAM,oBAAoB;QACxB,MAAM,aAAa,CAAC,IAAI,KAAK,WAAW,CAAC,IAAI;QAC7C,IAAI,WAAW,CAAC;QAEhB,IAAI,aAAa,GAAG;YAClB,WAAW;gBACT,MAAM,KAAK,KAAK,CAAC,aAAa,CAAC,OAAO,KAAK,KAAK,EAAE;gBAClD,OAAO,KAAK,KAAK,CAAC,AAAC,aAAa,CAAC,OAAO,KAAK,EAAE,IAAK;gBACpD,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAO,KAAM;gBAC/C,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAQ;YAC5C;QACF;QACA,OAAO;IACT;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,YAAY;QACd;mCAAG;QAAC;KAAQ;IAEZ,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,MAAM,QAAQ;kDAAW;oBACvB,MAAM,cAAc;oBACpB,YAAY;oBAEZ,yCAAyC;oBACzC,IAAI,OAAO,IAAI,CAAC,aAAa,MAAM,KAAK,KAAK,CAAC,YAAY,OAAO,IAAI,OAAO;wBAC1E,YAAY,OAAO,GAAG;wBACtB;oBACF;gBACF;iDAAG;YAEH;4CAAO,IAAM,aAAa;;QAC5B;mCAAG;QAAC;QAAU;QAAO;KAAQ;IAE7B,MAAM,kBAAkB,EAAE;IAE1B,OAAO,IAAI,CAAC,UAAU,OAAO,CAAC,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,aAAa,aAAa,aAAa,WAAW;YAC3E;QACF;QACA,gBAAgB,IAAI,eAClB,6LAAC;;gBACE,OAAO,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,GAAG;gBAAM,SAAS,MAAM,CAAC;;WADrD;;;;;IAIf;IAEA,MAAM,aAAa,AAAC,GAAkD,OAAhD,OAAO,SAAS,KAAK,IAAI,GAAG,QAAQ,CAAC,GAAG,MAAK,KAAqD,OAAlD,OAAO,SAAS,OAAO,IAAI,GAAG,QAAQ,CAAC,GAAG,MAAK,KAAkD,OAA/C,OAAO,SAAS,OAAO,IAAI,GAAG,QAAQ,CAAC,GAAG;IAElK,IAAI,QAAQ;QACV,MAAM,WAAW,SAAS,KAAK,KAAK,KAAK,SAAS,OAAO,GAAG;QAC5D,qBACE,6LAAC;YAAI,WAAW,AAAC,aAAwD,OAA5C,WAAW,iBAAiB;;gBACtD,SAAS,IAAI,GAAG,IAAI,AAAC,GAAgB,OAAd,SAAS,IAAI,EAAC,QAAM;gBAAI;;;;;;;IAGtD;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,gBAAgB,MAAM,GAAG,2BAAa,6LAAC;sBAAK;;;;;;;;;;;AAGnD;GAnEwB;KAAA","debugId":null}}]
}